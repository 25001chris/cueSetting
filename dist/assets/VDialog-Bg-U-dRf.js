import{g as L,b as E,al as y,aE as w,i as S,ai as h,aF as B,aj as P,aG as F,aH as T,ag as $,aI as q,aq as O,aJ as C,ab as I,aK as M,af as V,av as R,u as j,aL as b,q as k,au as H,aM as N}from"./index-CWavEptk.js";const W=S({target:[Object,Array]},"v-dialog-transition"),X=L()({name:"VDialogTransition",props:W(),setup(o,f){let{slots:s}=f;const r={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(e,m){var i;await new Promise(n=>requestAnimationFrame(n)),await new Promise(n=>requestAnimationFrame(n)),e.style.visibility="";const{x:t,y:u,sx:d,sy:g,speed:a}=D(o.target,e),l=h(e,[{transform:"translate(".concat(t,"px, ").concat(u,"px) scale(").concat(d,", ").concat(g,")"),opacity:0},{}],{duration:225*a,easing:B});(i=A(e))==null||i.forEach(n=>{h(n,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*a,easing:P})}),l.finished.then(()=>m())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(e,m){var i;await new Promise(n=>requestAnimationFrame(n));const{x:t,y:u,sx:d,sy:g,speed:a}=D(o.target,e);h(e,[{},{transform:"translate(".concat(t,"px, ").concat(u,"px) scale(").concat(d,", ").concat(g,")"),opacity:0}],{duration:125*a,easing:F}).finished.then(()=>m()),(i=A(e))==null||i.forEach(n=>{h(n,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*a,easing:P})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>o.target?E(w,y({name:"dialog-transition"},r,{css:!1}),s):E(w,{name:"dialog-transition"},s)}});function A(o){var s;const f=(s=o.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:s.children;return f&&[...f]}function D(o,f){const s=T(o),r=$(f),[e,m]=getComputedStyle(f).transformOrigin.split(" ").map(x=>parseFloat(x)),[t,u]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let d=s.left+s.width/2;t==="left"||u==="left"?d-=s.width/2:(t==="right"||u==="right")&&(d+=s.width/2);let g=s.top+s.height/2;t==="top"||u==="top"?g-=s.height/2:(t==="bottom"||u==="bottom")&&(g+=s.height/2);const a=s.width/r.width,l=s.height/r.height,i=Math.max(1,a,l),n=a/i||0,v=l/i||0,c=r.width*r.height/(window.innerWidth*window.innerHeight),p=c>.12?Math.min(1.5,(c-.12)*10+1):1;return{x:d-(e+r.left),y:g-(m+r.top),sx:n,sy:v,speed:p}}const Y=S({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...q({origin:"center center",scrollStrategy:"block",transition:{component:X},zIndex:2400})},"VDialog"),G=L()({name:"VDialog",props:Y(),emits:{"update:modelValue":o=>!0,afterLeave:()=>!0},setup(o,f){let{emit:s,slots:r}=f;const e=O(o,"modelValue"),{scopeId:m}=C(),t=I();function u(a){var n,v;const l=a.relatedTarget,i=a.target;if(l!==i&&((n=t.value)!=null&&n.contentEl)&&((v=t.value)!=null&&v.globalTop)&&![document,t.value.contentEl].includes(i)&&!t.value.contentEl.contains(i)){const c=N(t.value.contentEl);if(!c.length)return;const p=c[0],x=c[c.length-1];l===p?x.focus():p.focus()}}M&&V(()=>e.value&&o.retainFocus,a=>{a?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function d(){var a;(a=t.value)!=null&&a.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function g(){s("afterLeave")}return V(e,async a=>{var l;a||(await R(),(l=t.value.activatorEl)==null||l.focus({preventScroll:!0}))}),j(()=>{const a=b.filterProps(o),l=y({"aria-haspopup":"dialog","aria-expanded":String(e.value)},o.activatorProps),i=y({tabindex:-1},o.contentProps);return E(b,y({ref:t,class:["v-dialog",{"v-dialog--fullscreen":o.fullscreen,"v-dialog--scrollable":o.scrollable},o.class],style:o.style},a,{modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,"aria-modal":"true",activatorProps:l,contentProps:i,role:"dialog",onAfterEnter:d,onAfterLeave:g},m),{activator:r.activator,default:function(){for(var n=arguments.length,v=new Array(n),c=0;c<n;c++)v[c]=arguments[c];return E(k,{root:"VDialog"},{default:()=>{var p;return[(p=r.default)==null?void 0:p.call(r,...v)]}})}})}),H({},t)}});export{G as V};
